<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AJAX Lecture</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

</head>
<body>

<main class="container mt-5">
    <h1 class="my-5">Intro to AJAX</h1>
    <form method="GET" action="https://hookb.in/jenreB618QT1012zVbBD">
        <div class="input-group">
            <input placeholder="Enter username" class="form-control" type="text" name="username">
        </div>
        <button class="btn btn-success my-2">Submit</button>
    </form>
    <a href="https://hookb.in/jenreB618QT1012zVbBD?username=bob">Some Link</a>
</main>


<script src="js/jquery-2.2.4.js"></script>
<script src= "js/ajax-practice.js"></script>
<script>
    $(document).ready(function() {
        "use strict";
        // jQuery Request Object
        console.log($.ajax('https://hookb.in/jenreB618QT1012zVbBD?username=bob'));
        // simple API request
        $.ajax("https://swapi.co/api/films").done(function(data){
            console.log(data);
        });
        // simple request
        $.ajax('https://www.reddit.com/r/webdev/.json').done(function(data) {
            console.log(status);
            console.log(jqXhr);
            console.log(data.data.children[0].data.title);
        });
        // GET Request and POST Request to HookBin with options object
        var settings = {
            data: {
                q: "Silly Cats",
                order: "ascending",
                limit: 10
            }
        };

        $.ajax('https://hookb.in/7ZEqM9ONd2tnqnDEp7Ge', settings).done(function(data) {
            console.log(data);
        });
        var settings = {
            method: "POST",
            data: {
                username: "jreich",
                password: "password"
            }
        };
        //
        $.ajax('https://hookb.in/7ZEqM9ONd2tnqnDEp7Ge', settings).done(function(data) {
            console.log(data);
        });
        // request to local JSON file
        $.ajax('./data/orders.json'); // jQuery request object
        $.ajax("./data/orders.json").done(function(responseData){
            console.log(responseData);
        });
        // DOESN'T WORK
        //     var responseData;
        //     $.ajax('./data/orders.json').done(function(data) {
        //         responseData = data;
        //     }); // .done()
        //
        //     console.log(responseData);
        // single argument with .done(), .fail() and .always() methods
        $.ajax({
            "url": "https://swi.co/api/films",
            "type": "GET",
            "data": {
                "search": "A New Hope"
            }
        }).done(function(data, status, jqXhr) {
            console.log(status);
            console.log(data);
            console.log("The director of Star Wars: A New Hope is..." + data.results[0].director);
        }).fail(function(jqXhr, status, error) {
            console.log("Request failed! " + status);
        }).always(function() {
            console.log("Request made.");
        });
        // Url first argument and configuration object second argument
        $.ajax("https://swapi.co/api/films", {
            "type": "GET",
            "data": {
                "search": "A New Hope"
            }
        }).done(function(data) {
            console.log("The director of Star Wars: A New Hope is..." + data.results[0].director);
        });
        // Storing returned jQuery XML HTTP Response object
        var jqXhr = $.ajax("https://swapi.co/api/films", {
            "type": "GET",
            "data": {
                "search": "A New Hope"
            }
        });

        console.log(jqXhr);

        jqXhr.done(function(data) {
            console.log("The director of Star Wars: A New Hope is..." + data.results[0].director);
        });
        // GET short-hand method
        $.get("https://swapi.co/api/films", {
            "data": {
                "search": "A New Hope"
            }
        }).done(function(data) {
            console.log("The director of Star Wars: A New Hope is..." + data.results[0].director);
        });
    });
</script>

</body>
</html>



